<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>


<ul id="wron">
    <li>ff</li>
    <li>ww</li>
</ul>

<ul id="righ">
    <li>ff</li>
    <li>ww</li>
</ul>

<script>
    /*
    * 糟糕的例子,因为最终每个节点的点击事件都会alert出i，而最终是2
    * */
    var wrong_add_func = function(nodes){
        var i;
        for(i=0;i<nodes.length;i++){
            nodes[i].onclick = function(e){
                alert(i);
            }
        }
    }
    /*
    * 正确的例子，将i变量封装
    * */
    var right_add_func = function(nodes){
        for(var i=0;i<nodes.length;i++){
            nodes[i].onclick = function(i){
                return function(e){
                    alert(i);
                }
            }(i);
        }
    }
    wrong_add_func(document.getElementById("wron").getElementsByTagName("li"));
    right_add_func(document.getElementById("righ").getElementsByTagName("li"));
 </script>

</body>
</html>